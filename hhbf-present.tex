 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 % $ID: hhbf-present.tex Wed, 29 Dec 2004 13:01:54 +0800  mhfan $ %
 %                                                              %
 % Description:                                                 %
 %                                                              %
 % Maintainer:  ∑∂√¿ª‘(Meihui Fan)  <mhfan@ustc.edu>            %
 %                                                              %
 % CopyRight (c)  2004  HHTech                                  %
 %   www.hhcn.com, www.hhcn.org                                 %
 %   All rights reserved.                                       %
 %                                                              %
 % This file is free software;                                  %
 %   you are free to modify and/or redistribute it  	        %
 %   under the terms of the GNU General Public Licence (GPL).   %
 %                                                              %
 % Last modified: Sat, 08 Jan 2005 03:28:22 +0800      by mhfan #
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\listfiles % (should list the files loaded and it's versions).

\documentclass[cjk]{beamer}
% For a green structure color use:
%\colorlet{structure}{green!50!black}
%\setbeamercolor{math text}{fg=green!50!black}
%\setbeamercolor{normal text in math text}{parent=math text}
\setbeamercovered{dynamic}

\mode<article> { % only for the article version
  \usepackage{fullpage}
}

\mode<presentation> {
  \usetheme{Warsaw}		    % or ...
  \usefonttheme[onlysmall]{structurebold}
  \setbeamertemplate{background canvas}[vertical shading]
				       [bottom=red!10,top=blue!10]
  \setbeamercovered{transparent}    % or whatever (possibly just delete it)
}

\usepackage{pgf,pgfarrows,pgfnodes,pgfautomata,pgfheaps,pgfshade}
\usepackage[english]{babel}	    % or whatever
\usepackage[latin1]{inputenc}	    % or whatever
% Or whatever. Note that the encoding and the font should match. If T1
% does not look nice, try deleting the line with the fontenc.
\usepackage{times}
\usepackage[T1]{fontenc}

\usepackage{CJK,ifthen,inputenc,fontenc,colortbl}%,ipalmacs
\usepackage{latexsym,amssymb,amsfonts,textcomp,pxfonts,txfonts,pifont,bbding}
\usepackage{marvosym,stmaryrd,ifsym,tipa,ulsy,dingbat,ipa,wasysym,manfnt} %
\usepackage{longtable,multirow,hhline,dcolumn,tabularx,array}
\usepackage{makeidx,verbatim,fancybox}

%\usepackage{fancyhdr}   % fancy header & footer, box
%\newcommand{\makeheadrule}{         % $(A6(ReR3C<:aO_(B
%  \rule[.7\baselineskip]{\headwidth}{1.2pt}\vskip-0.97\baselineskip
%  \rule[.6\baselineskip]{\headwidth}{0.4pt}}
%%  \makebox[-3pt][l]{\rule[.7\baselineskip]{\headwidth}{0.4pt}}
%%  \rule[0.85\baselineskip]{\headwidth}{1.5pt}\vskip-.8\baselineskip}
%  \makeatletter
%  \renewcommand{\headrule}{
%        {\if@fancyplain\let\headrulewidth\plainheadrulewidth\fi}\makeheadrule}
%  \makeatother

\usepackage{graphicx,subfigure,wrapfig} % for graph
\graphicspath {{./}{figs/}} % set graphics path
\DeclareGraphicsExtensions{.eps,.ps,.eps.gz,.ps.gz,.jpg,.jpeg,.pdf,.gif,.png}
\DeclareGraphicsRule{*}{mps}{*}{}

%\usepackage{geometry}
%\usepackage[a4paper,pdftex]{geometry}
%\geometry{top=1.7cm,bottom=2cm,left=2.5cm,right=2.1cm}
%\geometry{body={15.6cm, 20cm}, centering, dvipdfm}
%\geometry{a4paper=true, pdftex=true}

\usepackage{hyperref}
%\usepackage[CJKbookmarks,dvipdf,bookmarks=true]{hyperref}
% setup hyperref for PDF nevigation:
  \hypersetup{colorlinks, linkcolor=blue, citecolor=blue, urlcolor=red,%
        plainpages=true, bookmarksopen=false,%
        pdfhighlight=/P, %/I(inverse) /N(no effect) /O(outline) /P(inset)
        pdfauthor={Meihui Fan <mhfan@ustc.edu>},%
        pdftitle={A LaTeX example collection},%
        pdfsubject={LaTeX, TeX},%
        pdfkeywords={LaTeX, TeX, Typesetting},%
        pdfstartview=FitH, %FitBH, FitB
        pdfview=FitH,
	pdfpagemode=FullScreen, %None, UseOutlines, UseThumbs
	CJKbookmarks=true, dvipdf=true, bookmarks=true,
}

\usepackage{listings} %[mathscope]
  \lstloadlanguages{C++, bash, tcl, VHDL, Haskell, Lisp, TeX, Oz, Perl, make}
  %\lstinline!char foo='c';!    % ! can be #, %, $, etc.
  \lstset{language=C, tabsize=8, keepspaces=true,
        columns=fixed, %flexiblecolumns=true,
        numbers=left, stepnumber=1, numberstyle=\tiny,
        basicstyle=\small\ttfamily, showspaces=false,
        %identifierstyle=\color{blue},
        stringstyle=\color{magenta},
        keywordstyle=\color{green}\textbf,
        commentstyle=\color{cyan}\bfseries\itshape,
        %classoffset=2,
        %morekeywords={typedef,struct,enum,int,long,unsigned},
        %keywordstyle=[2]\color{green}\bfseries,
        %breaklines=true, breakautoindent=true, breakindent=4em,
        escapeinside={/*@}{@*/}
}

%\newcommand{}          % newcommand definition:
%\renewcommand{}        % redefine command:
%\renewcommand{\headrule}{}
%\renewcommand\labelitemi{\small\EightFlowerPetal}
%\renewcommand\labelitemii{\small\SixFlowerAltPetal}
%\renewcommand\labelitemiii{\small\FiveStarConvex}
\newcommand{\ucl}{$\muup$Clinux~}

\setlength{\parskip}{4pt plus1pt minus1pt}

% Don't report over-full v/h-boxes if over-edge is small.
\vfuzz 2pt \hfuzz 2pt
\iffalse
% indent 2 Chinese characters befor each paragraph.
\setlength{\parindent}{2em} %\parskip 3mm
\makeatletter               % indent the first paragraph. [indentfirst]
    \let\@afterindentfalse\@afterindenttrue\@afterindenttrue
\makeatother
\fi

\title[\ucl Porting]{
  \ucl Based on kernel 2.6.x for \\
  ADI BF533/561 Processores \\
}
\subtitle{Porting \& Developing Drivers for HHBF561 Board}

\author[MHFan]{
  Meihui Fan \\ $<$\href{mailto:mhfan@ustc.edu}{mhfan@ustc.edu}$>$ \\
}

\institute[Dep. Soft. HHTech]{
  Blackfin Development Group \\
  Department of Software Development \\
  HH Tech. co. Ltd \\
}

\date[\thisyear]{\today}

% This is only inserted into the PDF information catalog. Can be left out. 
\subject{Development Meeting}

% If you have a file called "university-logo-filename.xxx", where xxx
% is a graphic format that can be processed by latex or pdflatex,
% resp., then you can add a logo as follows:
%\pgfdeclareimage[height=0.5cm]{university-logo}{university-logo-filename}
%\logo{\pgfuseimage{university-logo}}

% If you wish to uncover everything in a step-wise fashion:
%\beamerdefaultoverlayspecification{<+->}

\begin{document} \begin{CJK}{GBK}{song}

  \frame{\titlepage}
    
  % You might wish to add the option [pausesections]
  \section<presentation>*{Outline}
  \begin{frame}
    \frametitle{Outline}
    \tableofcontents[part=1,pausesections]
  \end{frame}

  % Delete this, if you do not want the table of contents to pop up at
  % the beginning of each subsection:
  \AtBeginSubsection[]{
    \begin{frame}<beamer>
      \frametitle{Outline} %currentsection,currentsubsection
      \tableofcontents[current]
    \end{frame}
  }

  \section{Introduction}
  \subsection{Overview of Blackfin Processor}
    \begin{frame}
      \frametitle{Features of the ADSP-BF561}
      % - Blackfin Symmetric Multi-Processor for Consumer Multimedia.
      \begin{overprint}
      \onslide<1>
      \begin{block}{Characteristics}
	\begin{itemize}
	  \item Dual Blackfin cores with each core capable of 756 MHz/1512 
	  MMACs (3024 MMACs total).
	  \item Large On-Chip Memory of 328 KBytes arranged as individual L1 
	  memory systems for each core plus a shared L2 memory space.
    	  \item High data throughput tailored for the needs of imaging and consumer multimedia applications.
    	  \item Application Tuned Peripherals provide glueless connectivity to a variety of audio/video converters and general-purpose ADCs/DACs.
	\end{itemize}
      \end{block}
      \onslide<2>
      \begin{block}{Applications}
	\begin{itemize}
	  \item Digital Still Cameras
	  \item Digital Video Cameras
	  \item Portable Media Players
	  \item Digital Video Recorders
	  \item Set Top Boxes
	  \item Consumer Multimedia
	  \item Automotive Vision Systems
	  \item Broadband Wireless Systems
	\end{itemize}
      \end{block}
      \onslide<3>
      \begin{block}{Peripheral Resource}
	\begin{itemize}
	  \item 2 Parallel Peripheral Interface (PPIs)
	  \item 2 Serial Ports (SPORTs)
	  \item Serial Peripheral Interface (SPI)
	  \item 12 General-Purpose 32 bits Timers
	  \item Universal Asynchronous Receiver Transmitter
	  \item Watchdog Timer
	  \item 48 General Purpose I/O (Programmable Flags)
	\end{itemize}
      \end{block}
      \onslide<4>
      \begin{block}{Development Environment}
	\begin{itemize}
	  \item<1-> Visual DSP
	  \item<2-> GNU Toolchain + \ucl
	\end{itemize}
      \end{block}
      \end{overprint}
    \end{frame}

  \section{U-Boot for Blackfin}
    \begin{frame}
      \frametitle{Porting U-Boot-1.1.1}
      \begin{itemize}
	\item<1-> Board/chip level configuration
	\item<2-> FLASH driver
	\item<3-> DM9000 ethernet driver
	\item<4-> second stage loader for BF561
	\item<5-> combine RAM and ROM version for easily debugging
      \end{itemize}
    \end{frame}

  \section{\ucl on Blackfin}
  \subsection{Linux kernel 2.6}
  \begin{frame}
    \frametitle{Linux kernel 2.6}
  \begin{columns}
    \begin{column}{4.5cm}
    \begin{block}{Realtime Performance}
      \begin{itemize}
	\item<1-> Improved Efficient Scheduler
	\item<2-> Preemptive?
      \end{itemize}
    \end{block}
  \end{column}
  \begin{column}{6.5cm}
    \begin{figure}[htdp]
      \includegraphics[width=\textwidth]{rt-avg-response}
    \end{figure}
  \end{column}
  \end{columns}
  \end{frame}
  \begin{frame}
    \frametitle{Linux kernel 2.6}
    \begin{alertblock}{IPC Support}
      \begin{itemize}
	\item<1-> System V IPC
	\item<2-> Native POSIX Thread
	\item<3-> POSIX Message Queue
      \end{itemize}
    \end{alertblock}
  \end{frame}

  \subsection{Ethernet Support}
    \begin{frame}
      \frametitle{Ethernet Support}
      \begin{overprint}
	\onslide<1-3>
	\begin{block}{Davicom DM9000 Driver}
      \begin{itemize}
	\item<1-> Version 1.25 released for linux kernel 2.4
	\item<2-> IO base address \& Interrupt resource
	\item<3-> Cache problem
      \end{itemize}
      \end{block}
      \onslide<4-6>
      \begin{block}{To Be Improved}
      \begin{itemize}
	\item<4-> IPV6 support
	\item<5-> Bottom-half Interrupt Processing
	\item<6-> Startup BUG
      \end{itemize}
      \end{block}
    \end{overprint}
    \end{frame}

  \subsection{Video Driver}
    \begin{frame}
      \frametitle{Overview of the Video Hardware}
      \begin{itemize}
	\item<1-> ADV7171 video encoder chip
	\item<2-> SAA7113H video decoder chip
	\item<3-> emulated I2C bus for programming
	\item<4-> two PPI channels with DMA channels for data transfer
      \end{itemize}
    \end{frame}
    \begin{frame}
      \frametitle{Video Driver Framework}
      \begin{itemize}
	\item<1-> Frame Buffer
	\item<2-> Video for Linux V2(V4L2)
      \end{itemize}
    \end{frame}
    \begin{frame}
      \frametitle{Frame Buffer Driver}
      \begin{itemize}
	\item<1-> /dev/fb
	\item<2-> ITU 656 $\rightleftharpoons$ RGB 24
      \end{itemize}
    \end{frame}
    \begin{frame}
      \frametitle{To Be Improved}
      \begin{itemize}
	\item<1-> functions and performance of FB driver
	\item<2-> V4L2 driver with video capture and output
	\begin{itemize}
	  \item /dev/video
	  \item /dev/vout
	  \item /dev/vfx \& /dev/codec etc.
	\end{itemize}
      \end{itemize}
    \end{frame}

  \subsection{Audio Driver}
    \begin{frame}
      \frametitle{Overview of the Audio Hardware}
      \begin{itemize}
	\item<1-> SPI for programming
	\item<2-> SPORT with DMA channel for data transfer
	\item<3-> ADI1836A audio chip
      \end{itemize}
    \end{frame}
    \begin{frame}
      \frametitle{The Advanced Linux Sound Architecture (ALSA)}
      \begin{itemize}
	\item<1-> Efficient support for all types of audio interfaces.
	\item<2-> Fully modularized sound drivers.
	\item<3-> Support for the older OSS API.
	\item<4-> Simplify application programming and provide higher level 
	  functionality.
      \end{itemize}
    \end{frame}

  \subsection{Core B Driver for BF561}
    \begin{frame}
      \frametitle{Core B Driver for BF561}
      \begin{overprint}
	\onslide<1-3>
      \begin{itemize}
	\item<1-> utilise proc filesystem(/proc/coreb)
	\item<2-> second stage loader(/proc/coreb/load)
	\item<3-> make core B run(/proc/coreb/hold)
      \end{itemize}
      \onslide<4-5>
      \begin{block}{To Be Improved}
      \begin{itemize}
	\item<4-> Core B interrupt support
	\item<5-> Abstract and implement an process/thread model
      \end{itemize}
    \end{block}
  \end{overprint}
    \end{frame}

  \section*{Summary}
  \begin{frame}
    \frametitle{Summary}
    \begin{itemize}
      \item<1-> far to be mature
      \item<2-> many to be done
      \item<3-> critical CACHE problem
    \end{itemize}
  \end{frame}

  \begin{frame} % Thanks page
    \begin{figure}[htdp]
      \includegraphics[width=\textwidth]{thanks}
    \end{figure}
  \end{frame}

\end{CJK} \end{document}

 %%%%%%%%%%%%%%%% End Of File: hhbf-present.tex %%%%%%%%%%%%%%%%
